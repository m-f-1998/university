<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <LINK REL="StyleSheet" HREF="css/style.css" TYPE="text/css" />
    <LINK
      REL="StyleSheet"
      HREF="css/iconic/css/iconmonstr-iconic-font.min.css"
      TYPE="text/css"
    />
    <LINK REL="icon" type="image/png" href="css/Images/favicon.png" />
    <script
      type="text/javascript"
      src="http://code.jquery.com/jquery-1.7.1.min.js"
    ></script>
    <title>PedalPay</title>
  </head>

  <body onload="checkDetails();">
    <div id="nav">
      <a href="index.html">
        <logo>PedalPay</logo>
      </a>
      <ul>
        <li><a href="index_esp.html">Inicio</a></li>
        <li><a href="quienessomos.html">¿Quiénes somos?</a></li>
        <li><a href="productos.html">Productos</a></li>
        <li><a href="contactanos.html">Contáctanos</a></li>
        <li>
          <a
            href="#"
            id="login3"
            class="btn btn-primary modal-open-links"
            data-toggle="modal"
            data-modal-show="one"
            data-target="#myModal"
            >Acceder</a
          >
        </li>
      </ul>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" data-dismiss="modal">&times;</span>
          <h1>PedalPay</h1>
        </div>
        <div class="modal-body">
          <div id="one" class="hide_first">
            <div id="form">
              <form
                id="loginForm"
                method="post"
                onsubmit="event.preventDefault(); loginValidation()"
                action="http://www.matthewfrankland.co.uk/pedalPay/login/login.php"
              >
                <div class="loginError" id="loginError"></div>
                <div class="loginSuccess" id="loginSuccess"></div>
                <div class="inputs">
                  <h2>Acceder</h2>
                  <label id="loginEmailPrompt"> Email </label>
                  <input
                    type="text"
                    name="email"
                    id="email"
                    placeholder="Tu email.."
                  />
                </div>

                <div class="inputs">
                  <label id="loginPasswordPrompt"> Contraseña </label>
                  <input
                    type="password"
                    name="password"
                    id="password"
                    placeholder="Tu contraseña.."
                  />
                </div>

                <div class="inputs">
                  <div id="buttonholder">
                    <button type="submit" name="login" class="btn">
                      Acceder
                    </button>
                  </div>
                </div>
                <p>
                  <a
                    href="#"
                    id="login2"
                    class="btn btn-danger modal-open-links"
                    data-toggle="modal"
                    data-modal-show="two"
                    data-target="#myModal"
                    >¿No estás registrado?</a
                  >
                </p>
                <p>
                  <a
                    href="#"
                    id="login2"
                    class="btn btn-danger modal-open-links"
                    data-toggle="modal"
                    data-modal-show="three"
                    data-target="#myModal"
                    >¿Olvidaste tu constraseña?</a
                  >
                </p>
              </form>
            </div>
          </div>
          <div id="two" style="display:none" class="hide_first">
            <form
              id="registerForm"
              method="post"
              action="http://www.matthewfrankland.co.uk/pedalPay/login/register.php"
            >
              <div class="registerErrors" id="registerErrors"></div>
              <div class="registerSuccess" id="registerSuccess"></div>

              <h2>Regístrate</h2>

              <div class="tab">
                <h3>Información de accedimiento</h3>
                <label id="registerEmailPrompt"> Email </label><br />
                <input
                  type="text"
                  name="email"
                  id="email2"
                  placeholder="Tu email.."
                /><br />

                <label id="registerPasswordPrompt"> Contraseña </label>
                <input
                  type="password"
                  name="password"
                  id="password"
                  placeholder="Tu contraseña.."
                /><br />
              </div>

              <div class="tab">
                <h3>Información personal</h3>

                <label id="registerNamePrompt"> Nombre </label>
                <input
                  type="text"
                  name="name"
                  placeholder="Your nombre.."
                /><br />

                <label id="registerDobPrompt"> Fecha de nacimiento </label>
                <input
                  type="text"
                  name="dob"
                  placeholder="Your fecha de nacimiento.."
                /><br />

                <label id="registerNumberPrompt"> Número de teléfono</label>
                <input
                  type="text"
                  name="phone"
                  placeholder="Your número de teléfono.."
                />
                <br />
                <label id="registerGenderPrompt">Sexo</label>
                <select name="gender" id="gender">
                  <option value="m">Macho</option>
                  <option value="f">Hembra</option>
                </select>
              </div>

              <div class="tab">
                <h3>Domicilio</h3>
                <label id="registerAddressPrompt"> Domicilio </label>
                <input
                  type="text"
                  name="addressone"
                  placeholder="Tu domicilio.."
                /><br />

                <label id="registerCityPrompt"> Ciudad </label><br />
                <input
                  type="text"
                  name="city"
                  placeholder="Tu ciudad.."
                /><br />

                <label id="registerPostCodePrompt"> Código postal </label>
                <input
                  type="text"
                  name="zip"
                  placeholder="Tu código postal.."
                /><br />
              </div>

              <div class="tab">
                <h3>Terms & Conditions</h3>

                <label>Privacy policy thing </label>
                <input type="checkbox" name="privacy" /> <br />

                <label>Terms and conditions thing</label>
                <input type="checkbox" name="conditions" /><br />

                <label>Other agreements</label>
                <input type="checkbox" name="other" />
              </div>

              <div id="buttonholder">
                <button type="button" id="prevBtn" onclick="nextPrev(-1)">
                  Volver
                </button>
                <button type="button" id="nextBtn" onclick="nextPrev(1)">
                  Siguiente
                </button>
              </div>

              <!-- Circles which indicates the steps of the form: -->
              <div style="text-align:center;margin-top:40px;">
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
              </div>
              <p>
                <a
                  href="#"
                  id="login2"
                  class="btn btn-danger modal-open-links"
                  data-toggle="modal"
                  data-modal-show="one"
                  data-target="#myModal"
                  >¿Estás registrado?</a
                >
              </p>
              <p>
                <a
                  href="#"
                  id="login2"
                  class="btn btn-danger modal-open-links"
                  data-toggle="modal"
                  data-modal-show="three"
                  data-target="#myModal"
                  >¿Olvidaste tu contraseña?</a
                >
              </p>
            </form>
          </div>
          <div id="three" style="display:none" class="hide_first">
            <form
              id="resetPassForm"
              method="post"
              onsubmit="event.preventDefault(); resetValidation()"
              action="http://www.matthewfrankland.co.uk/pedalPay/resetPass/emailReset.php"
            >
              <div class="resetErrors" id="resetErrors"></div>
              <div class="inputs">
                <h2>Cambiar de contraseña</h2>
                <label id="resetEmailPrompt"> Email </label>
                <input type="text" name="email" placeholder="Tu email.." />
              </div>

              <div class="inputs">
                <div id="buttonholder">
                  <button type="submit" name="login" class="btn">
                    Enviar
                  </button>
                </div>
              </div>
              <p>
                <a
                  href="#"
                  id="login2"
                  class="btn btn-danger modal-open-links"
                  data-toggle="modal"
                  data-modal-show="one"
                  data-target="#myModal"
                  >¿Recuerdas tu contraseña?</a
                >
              </p>
              <p>
                <a
                  href="#"
                  id="login2"
                  class="btn btn-danger modal-open-links"
                  data-toggle="modal"
                  data-modal-show="two"
                  data-target="#myModal"
                  >¿No estás registrado?</a
                >
              </p>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      function checkDetails() {
        if (sessionStorage.getItem("adminEmailStorage") != null) {
          document.getElementById("loginModal").style.display = "none";
          var elem = document.getElementById("login3");
          var indexOfEmail = sessionStorage
            .getItem("adminEmailStorage")
            .indexOf("@");
          var username = sessionStorage
            .getItem("adminEmailStorage")
            .substring(0, indexOfEmail);
          elem.outerHTML =
            "<li class='dropdown'><a id='dropdown' href='javascript:void(0)'>" +
            username +
            "</a><div class='dropdowncontent'><a href='personalprofile.html'>Información Personal</a><a href='bookingsprofile.html'>Detalles de reservas</a><a href='healthprofile.html'>Información de salud</a><a href='#'>Logout</a></div></li>";
        }
      }
    </script>
    <!--Login script for nav-->
    <script>
      // Get the modal
      var modal = document.getElementById("loginModal");
      // Get the button that opens the modal
      var btn = document.getElementById("login3");
      // Get the <span> element that closes the modal
      var span = document.getElementsByClassName("close")[0];
      // When the user clicks the button, open the modal
      btn.onclick = function() {
        modal.style.display = "block";
      };
      // When the user clicks on <span> (x), close the modal
      span.onclick = function() {
        modal.style.display = "none";
      };
      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };
    </script>

    <script>
      $(".modal-open-links").on("click", function(e) {
        //Set display:none for all first
        $(".hide_first").css("display", "none");
        content_to_show = $(this).attr("data-modal-show");
        //Show the one we clicked
        $("#" + content_to_show).css("display", "block");
      });
    </script>

    <div id="aboutContent">
      <div id="textBox2">
        <h1>¿Qué es PedalPay?</h1>
        <p>
          PedalPay es un alternativo genial a la forma tradicional de movernos.
          Hacemos todo lo posible por mantenerte en forma y saludable, mientras
          te dejamos transportar de modo amigable con el medio ambiente.
        </p>
      </div>
    </div>
    <div id="FAQ">
      <h1>FAQ</h1>
      <question
        >I am in a wheelchair, do you have bikes available for me?</question
      >
      <br />
      <answer
        >Yes! Here at PedalPay we believe cycling should be available to as many
        users as possible. When booking a bike, make sure it is a
        handbike!</answer
      ><br />
      <br />

      <question
        >My bike broke and I can't bring it back to the hub. What should I
        do?</question
      ><br />
      <answer
        >No worries at all, we understand that bikes can break down alot. Just
        get in touch with us by
        <a href="contact.html">one of our many ways of contact</a> and we'll
        make sure to get you to safety.</answer
      ><br />
      <br />

      <question
        >There seems to be road works around the hub so I can't get to it, can I
        change my booking?</question
      ><br />
      <answer
        >Got to hate all these roadworks at inconvenient times... but we have a
        solution! Navigate to
        <a href="boikingsprofile.html">your bookings profile</a> and cancel it.
        We won't hold it against you and you can book from a more convenient
        hub.</answer
      ><br />
      <br />

      <question
        >I booked a bike and there are none left at the hub, what can I do
        now?</question
      ><br />
      <answer
        >Due to people being able to walk up and grab a bike aswell, sometimes
        our hubs can be left dry. Please contact us using
        <a href="contact.html">one of our many ways of contact</a> and we will
        get you a refund sorted ASAP.</answer
      ><br /><br />
      <question>TODO</question>
      <br />
      <answer>TODO</answer>
      <br /><br />
      <question>TODO</question>
      <br />
      <answer>TODO</answer>
      <br /><br />
      <question>TODO</question>
      <br />
      <answer>TODO</answer>
      <br /><br />
      <question>TODO</question>
      <br />
      <answer>TODO</answer>
      <br /><br />
    </div>
    <div id="footerContent">
      <div id="footleft">
        <div id="footlogo">
          <h1>PedalPay</h1>
        </div>
      </div>
      <div id="footright">
        <div id="socials">
          <a href="https://www.facebook.com/PedalPayLMT/"
            ><i class="im im-facebook"></i
          ></a>
          <a href="https://twitter.com/PayPedal"
            ><i class="im im-twitter"></i
          ></a>
          <i class="im im-instagram"></i>
          <a href="mailto:pedalpaylmt@gmail.com" targer="_top"
            ><i class="im im-mail"></i
          ></a>
        </div>
        <div id="privacy">
          <p>
            Derechos de autor © 2019 Sift. LLC. Todos los derechos reservados.
            Privacidad / Renuncia
          </p>
        </div>
      </div>
    </div>

    <script>
      function loginValidation() {
        var email = document.forms["loginForm"]["email"].value;
        var password = document.forms["loginForm"]["password"].value;
        if (!email.match(/\S+@\S+\.\S+/)) {
          producePrompt("Email inválido", "loginEmailPrompt", "#e43353");
        }
        if (!password.match(/^.{6,}$/)) {
          producePrompt(
            "Contraseña inválida",
            "loginPasswordPrompt",
            "#e43353"
          );
        }
        if (password.match(/^.{6,}$/)) {
          producePrompt("Contraseña", "loginPasswordPrompt", "#853745");
        }
        if (email.match(/\S+@\S+\.\S+/)) {
          producePrompt("Email", "loginEmailPrompt", "#853745");
        }
      }
    </script>

    <script>
      function registerValidation() {
        var email = document.forms["registerForm"]["email"].value;
        var password = document.forms["registerForm"]["password"].value;
        var name = document.forms["registerForm"]["name"].value;
        var dob = document.forms["registerForm"]["dob"].value;
        var addressone = document.forms["registerForm"]["addressone"].value;
        var city = document.forms["registerForm"]["city"].value;
        var zip = document.forms["registerForm"]["zip"].value;

        if (!email.match(/\S+@\S+\.\S+/)) {
          producePrompt("Email inválido", "registerEmailPrompt", "#e43353");
        }
        if (!password.match(/^.{6,}$/)) {
          producePrompt(
            "Contraseña inválida",
            "registerPasswordPrompt",
            "#e43353"
          );
        }
        if (!name.match(/^.{2,}$/)) {
          producePrompt("Nombre inválido", "registerNamePrompt", "#e43353");
        }
        if (
          !dob.match(
            /(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/]([1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])/
          )
        ) {
          producePrompt(
            "Fecha de nacimiento inválido",
            "registerDobPrompt",
            "#e43353"
          );
        }
        if (!addressone.match(/^.{2,}$/)) {
          producePrompt(
            "Domicilio inválido",
            "registerAddressPrompt",
            "#e43353"
          );
        }
        if (!city.match(/^.{2,}$/)) {
          producePrompt("Ciudad inválida", "registerCityPrompt", "#e43353");
        }
        if (
          !zip.match(
            /^([A-Za-z][A-Ha-hJ-Yj-y]?[0-9][A-Za-z0-9]? ?[0-9][A-Za-z]{2}|[Gg][Ii][Rr] ?0[Aa]{2})$/
          )
        ) {
          producePrompt(
            "Código postal inválido",
            "registerPostCodePrompt",
            "#e43353"
          );
        }

        if (password.match(/^.{6,}$/)) {
          producePrompt("Contraseña", "registerPasswordPrompt", "#853745");
        }
        if (email.match(/\S+@\S+\.\S+/)) {
          producePrompt("Email", "registerEmailPrompt", "#853745");
        }
        if (name.match(/^.{2,}$/)) {
          producePrompt("Nombre", "registerNamePrompt", "#853745");
        }
        if (
          dob.match(
            /(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/]([1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])/
          )
        ) {
          producePrompt("Fecha de nacimiento", "registerDobPrompt", "#853745");
        }
        if (addressone.match(/^.{2,}$/)) {
          producePrompt("Domicilio", "registerAddressPrompt", "#853745");
        }
        if (city.match(/^.{2,}$/)) {
          producePrompt("Ciudad", "registerCityPrompt", "#853745");
        }
        if (
          zip.match(
            /^([A-Za-z][A-Ha-hJ-Yj-y]?[0-9][A-Za-z0-9]? ?[0-9][A-Za-z]{2}|[Gg][Ii][Rr] ?0[Aa]{2})$/
          )
        ) {
          producePrompt("Código postal", "registerPostCodePrompt", "#853745");
        }
      }
    </script>

    <script>
      function resetValidation() {
        var email = document.forms["resetPassForm"]["email"].value;
        if (!email.match(/\S+@\S+\.\S+/)) {
          producePrompt("Email inválido", "resetEmailPrompt", "#e43353");
        }
        if (email.match(/\S+@\S+\.\S+/)) {
          producePrompt("Email", "resetEmailPrompt", "#853745");
        }
      }
    </script>
    <script>
      function producePrompt(message, promptLocation, color) {
        document.getElementById(promptLocation).innerHTML = message;
        document.getElementById(promptLocation).style.color = color;
      }
    </script>

    <script>
      $(function() {
        $("#loginForm").on("submit", function(e) {
          var email = document.forms["loginForm"]["email"].value;
          var password = document.forms["loginForm"]["password"].value;
          if (email.match(/\S+@\S+\.\S+/) && password.match(/^.{6,}$/)) {
            $.ajax({
              type: "post",
              url: "http://www.matthewfrankland.co.uk/pedalPay/login/login.php",
              data: $("#loginForm").serialize(),
              success: function(response) {
                $("#loginError").html("");
                $("#loginSuccess").html("");
                var message = jQuery.parseJSON(response);
                if (message.error == true) {
                  $("#loginError").html("<p>" + message.message + "</p>");
                } else {
                  sessionStorage.setItem("adminEmailStorage", message.message);
                  sessionStorage.setItem(
                    "adminPasswordStorage",
                    document.getElementById("password").value
                  );
                  document.getElementById("loginModal").style.display = "none";
                  var elem = document.getElementById("login3");
                  var indexOfEmail = sessionStorage
                    .getItem("adminEmailStorage")
                    .indexOf("@");
                  var username = sessionStorage
                    .getItem("adminEmailStorage")
                    .substring(0, indexOfEmail);
                  elem.outerHTML =
                    "<li class='dropdown'><a id='dropdown' href='javascript:void(0)'>" +
                    username +
                    "</a><div class='dropdowncontent'><a href='personalprofile.html'>Información Personal</a><a href='bookingsprofile.html'>Detalles de reservas</a><a href='healthprofile.html'>Información de salud</a><a href='#'>Logout</a></div></li>";
                }
              },
              error: function() {
                //if fails
                alert("Something went wrong!");
              }
            });
          }
          e.preventDefault();
        });
      });
    </script>

    <script>
      $(function() {
        $("#registerForm").on("submit", function(e) {
          var email = document.forms["registerForm"]["email"].value;
          var password = document.forms["registerForm"]["password"].value;
          var name = document.forms["registerForm"]["name"].value;
          var dob = document.forms["registerForm"]["dob"].value;
          var addressone = document.forms["registerForm"]["addressone"].value;
          var city = document.forms["registerForm"]["city"].value;
          var zip = document.forms["registerForm"]["zip"].value;

          if (
            email.match(/\S+@\S+\.\S+/) &&
            password.match(/^.{6,}$/) &&
            name.match(/^.{2,}$/) &&
            dob.match(
              /(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/]([1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])/
            ) &&
            addressone.match(/^.{2,}$/) &&
            city.match(/^.{2,}$/) &&
            zip.match(
              /^([A-Za-z][A-Ha-hJ-Yj-y]?[0-9][A-Za-z0-9]? ?[0-9][A-Za-z]{2}|[Gg][Ii][Rr] ?0[Aa]{2})$/
            )
          ) {
            $.ajax({
              type: "post",
              url:
                "http://www.matthewfrankland.co.uk/pedalPay/login/register.php",
              data: $("#registerForm").serialize(),
              success: function(response) {
                $("#registerErrors").html("");
                $("#registerSuccess").html("");
                var message = jQuery.parseJSON(response);
                if (message.error == false) {
                  $("#registerErrors").html("<p>" + message.message + "</p>");
                } else {
                  $("#registerSuccess").html("<p>" + message.message + "</p>");
                }
              },
              error: function() {
                //if fails
                alert("The request failed");
              }
            });
          }
          e.preventDefault();
        });
      });
    </script>

    <script>
      $(function() {
        $("#resetPassForm").on("submit", function(e) {
          var email = document.forms["resetPassForm"]["email"].value;
          if (email.match(/\S+@\S+\.\S+/)) {
            $.ajax({
              type: "post",
              url:
                "http://www.matthewfrankland.co.uk/pedalPay/resetPass/emailReset.php",
              data: $("#resetPassForm").serialize(),
              success: function(response) {
                $("#resetErrors").html("");
                var message = jQuery.parseJSON(response);
                $("#resetErrors").html("<p>" + message.message + "</p>");
              },
              error: function() {
                //if fails
                alert("The request failed");
              }
            });
          }
          e.preventDefault();
        });
      });
    </script>
  </body>
</html>
